<html>
<head>
<title>TAT commented</title>
<style type="text/css">
<!--
/*
    This style sheet is borrowed from the NetLogo User Manual.  However, some of the units were
    changed from em to px because Java's StyleSheet support is limited for relative units such as
    em and % (this will supposively improve with newer versions of the VM) - jrn 7/21/05
    BE VERY VERY CAREFUL when you alter this style sheet -- it's possible to put in
    innocent-looking things that work on some VM's but cause Java exceptions on other for example
    we were using "font-size: 125%" but it caused Java exceptions on Java 1.5 on Windows - ST
    8/25/05
*/
:link { color: rgb(110,0,110); }
:visited { color: rgb(110,0,110); }
body {
    margin-left: 5px;
    font-family: arial, sans-serif;
    background: white;
    font-size: 12pt
}
h1 {
    color: white;
    background: rgb(45,0,45);
    font-size: 18pt;
    margin-bottom: 4px;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h2 {
    margin-top: 15px;
    margin-left: 6px;
    margin-bottom: 4px;
    background: rgb(166,172,255);
    font-size: 15pt;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h3 {
    margin-top: 15px;
    margin-left: 13px;
    margin-bottom: 4px;
    background: rgb(175,175,175);
    font-size: 12pt;
    padding: 0.2em;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h4 {
    margin-top: 15px;
    margin-bottom: 5px;
    margin-left: 15px;
    font-size: 12pt;
}
h5 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
h6 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
p {
    margin-left: 15px;
    margin-bottom: 3px;
}
pre {
    margin-left: 13px;
    background: rgb(225,225,225);
    font-family: monospace;
    font-size: 12pt;
    padding-left: 10px;
    padding-right: 3px;
    padding-top: 7px;
    padding-bottom: 7px;
    margin-top:9px;
    margin-bottom:0px;
}
code {
    font-family: monospace;
    font-size: 12pt;
}
blockquote {
    border: solid;
    border-style: solid;
    border-width: thin;
    border-color: black;
    background: rgb(250,250,220);
    padding-top: 0px;
    padding-bottom: 7px;
    margin-top: 7px;
    margin-bottom:1px;
}
ol {
   margin-bottom:1px;
}
ul {
   margin-bottom:1px;
}

-->
</style>
</head>
<body>

<p>This page was automatically generated by NetLogo 5.0.4.</p>

<p>The applet requires Java 5 or higher.
Java must be enabled in your browser settings.
Mac users must have Mac OS X 10.4 or higher.
Windows and Linux users may obtain the latest Java from
<a href="http://www.java.com/">Oracle's Java site</a>.</p>

<p><hr>

<p><font size="-1">In order for this to work, this file, your model file
(TAT commented.nlogo), and the files NetLogoLite.jar and NetLogoLite.jar.pack.gz
must all be in the same directory.  (You can copy NetLogoLite.jar and NetLogoLite.jar.pack.gz
from the directory where you installed NetLogo.)</font></p>

<p><font size="-1">On some systems, you can test the applet locally on your computer
before uploading it to a web server.  It doesn't work on all systems,
though, so if it doesn't work from your hard drive, please try
uploading it to a web server.</font></p>

<p><font size="-1">You don't need to include everything in this file in your page.
If you want, you can just take the HTML code beginning with
&lt;applet&gt; and ending with &lt;/applet&gt;, and paste it into any HTML
file you want.  It's even OK to put multiple &lt;applet&gt; tags
on a single page.</font></p>

<p><font size="-1">If the NetLogoLite files and your model are in different
directories, you must modify the archive= and value= lines
in the HTML code to point to their actual locations.
(For example, if you have multiple applets in different
directories on the same web server, you may want to put
a single copy of the NetLogoLite files in one central place and
change the archive= lines of all the HTML files to point
to that one central copy.  This will save disk space for
you and download time for your users.)</font></p>

<p>
<applet code="org.nlogo.lite.Applet"
        archive="NetLogoLite.jar"
        width="1172" height="622">
  <param name="DefaultModel"
         value="TAT%20commented.nlogo">
  <param name="java_arguments"
         value="-Djnlp.packEnabled=true">
</applet>
</p>

<p>powered by
<a target="_blank" href="http://ccl.northwestern.edu/netlogo/">NetLogo</a></p>

<p>view/download model file:
<a href="TAT%20commented.nlogo">TAT commented.nlogo</a></p>


<h1>CODE</h1>
<pre><font color="#5a5a5a">;;;;Dundee iGEM Team 2013;;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;;;;Dry Team;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;NasRach Collaborations;;</font><font color="#000000">




</font><font color="#5a5a5a">;creation of populations;</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [PP1s PP1]                                                           </font><font color="#5a5a5a">;; red PP1 molecules</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [degPs degP]                                                         </font><font color="#5a5a5a">;; degradation machinery - black squares</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [mcs mc]                                                             </font><font color="#5a5a5a">;; microcystin, purple turtles, assuming so small that kinetic interaction is negligible</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [complexes complex]                                                  </font><font color="#5a5a5a">;; PP1 bounded to microcystin, purple crosses</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [tatAs tatA]                                                         </font><font color="#5a5a5a">;; tatA proteins for gate use</font><font color="#000000">



</font><font color="#5a5a5a">;set up of all variables;</font><font color="#000000">
</font><font color="#007f69">globals</font><font color="#000000"> [  
  seperation                                                               </font><font color="#5a5a5a">;; controls distance between gates</font><font color="#000000">
  
  
  </font><font color="#5a5a5a">;variables required for loops;</font><font color="#000000">
  j                                                                        </font><font color="#5a5a5a">;; keeps count of how  many gates being created</font><font color="#000000">
  k                                                                        </font><font color="#5a5a5a">;; counts rows when colouring periplasm</font><font color="#000000">
  l                                                                        </font><font color="#5a5a5a">;; counts columns when colouring periplasm</font><font color="#000000">
  g                                                                        </font><font color="#5a5a5a">;; keeps count of gate width when colouring</font><font color="#000000">
  
  deg-number                                                               </font><font color="#5a5a5a">;; a count of the number of degraded PP1/complexes</font><font color="#000000">
  PP1-transported                                                          </font><font color="#5a5a5a">;; a count of PP1 transported from cytoplasm to periplasm</font><font color="#000000">
]



</font><font color="#5a5a5a">;attributes associated with all turtles;</font><font color="#000000">
</font><font color="#007f69">turtles-own</font><font color="#000000"> 
[
  speed mass energy                                                        </font><font color="#5a5a5a">;; controls the speed, mass &amp; energy of the turtles for kinetics</font><font color="#000000">
  last-collision                                                           </font><font color="#5a5a5a">;; keeps note of when the previous collision has occured</font><font color="#000000">
  transport                                                                </font><font color="#5a5a5a">;; a boolean variable keeping track of whether a PP1 is in the transport stage requiring the binding of tatAs</font><font color="#000000">
  bound-tatA                                                               </font><font color="#5a5a5a">;; a counter to keep a count of the number of tatAs bound to a given transporting PP1</font><font color="#000000">
]













</font><font color="#5a5a5a">;creates a class called particles for calling-in PP1s, degPs, mcs &amp; complexes;</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> particles
  </font><font color="#0000aa">report</font><font color="#000000"> (</font><font color="#660096">turtle-set</font><font color="#000000"> PP1s degPs mcs complexes)
</font><font color="#007f69">end</font><font color="#000000">



</font><font color="#5a5a5a">;creates a separate class for particles which exist in the periplasm;</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> periparticles
  </font><font color="#0000aa">report</font><font color="#000000"> (</font><font color="#660096">turtle-set</font><font color="#000000"> degPs complexes)
</font><font color="#007f69">end</font><font color="#000000">













</font><font color="#5a5a5a">;setup for the characteristics of PP1 proteins;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup-PP1
  </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">37500</font><font color="#000000">                                                           </font><font color="#5a5a5a">;; the masses used was the approximate mass of PP1 (all masses are in approximations of daltons)</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#963700">nobody</font><font color="#000000">
  
  </font><font color="#5a5a5a">;physical characteristics;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">1.5</font><font color="#000000">
  
  </font><font color="#5a5a5a">;setting up the initial transport conditions;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> transport </font><font color="#963700">false</font><font color="#000000">                                                      
  </font><font color="#0000aa">set</font><font color="#000000"> bound-tatA </font><font color="#963700">0</font><font color="#000000">                                                         
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;setup for the characteristics of degradation machinery;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup-degPs 
  </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#963700">10</font><font color="#000000">   
  </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">37500</font><font color="#000000">                                                           </font><font color="#5a5a5a">;; the mass of our degrading machinery has been taken as that of PP1 due to a lack of information. This means it will act in a similar manner to PP1</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#963700">nobody</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;setup for the characteristics of microcystin;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup-mcs
  </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#963700">10</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">995</font><font color="#000000">                                                             </font><font color="#5a5a5a">;; the mass of microcystin-LR is approx 995 daltons</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#963700">nobody</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">114</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;setup for the characteristics of complexes (PP1-microcystin bound together);</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup-complex
  </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#963700">10</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">38495</font><font color="#000000">                                                           </font><font color="#5a5a5a">;; the mass of the complex was simply defined as that of microcystin + PP1</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#963700">nobody</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;x&quot;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">126</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;setup for the characteristics of tatA;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup-tatA
  </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#963700">10</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">37700</font><font color="#000000">                                                             </font><font color="#5a5a5a">;; the mass of the tatA protein is ~37.7kDa</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#963700">nobody</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;triangle 2&quot;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">45</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> transport </font><font color="#963700">false</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">












</font><font color="#5a5a5a">;The setup procedure creates our environment and sets some conditions for the simulation;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup [both-sides?]
  </font><font color="#0000aa">clear-all</font><font color="#000000">
  
  </font><font color="#5a5a5a">;sets the shapes of particles;</font><font color="#000000">
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> PP1s </font><font color="#963700">&quot;circle&quot;</font><font color="#000000">                                          </font><font color="#5a5a5a">;; PP1 is depicted as a red circle </font><font color="#000000">
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> degPs </font><font color="#963700">&quot;square&quot;</font><font color="#000000">                                         </font><font color="#5a5a5a">;; degradation machinery is depicted as a black square</font><font color="#000000">
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> mcs </font><font color="#963700">&quot;turtle&quot;</font><font color="#000000">                                           </font><font color="#5a5a5a">;; microcystin is depicted as a red circle</font><font color="#000000">
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> tatAs </font><font color="#963700">&quot;triangle 2&quot;</font><font color="#000000">                                     </font><font color="#5a5a5a">;; tatA is depicted as a yellow triangle</font><font color="#000000">


  
  </font><font color="#5a5a5a">;sets up the initial conditions;</font><font color="#000000">
  
  </font><font color="#5a5a5a">;beginning loop values;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> k ( </font><font color="#963700">99</font><font color="#000000"> )
  </font><font color="#0000aa">set</font><font color="#000000"> l ( </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">99</font><font color="#000000"> )
  </font><font color="#0000aa">set</font><font color="#000000"> g </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> j </font><font color="#963700">0</font><font color="#000000">
  
  </font><font color="#5a5a5a">;beginning with a clean slate in degradated number, transported number and gate separation;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> deg-number </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> PP1-transported </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> seperation </font><font color="#963700">0</font><font color="#000000">
 
 
 
 
 
 
  </font><font color="#5a5a5a">;calls for the creation of the environment with a membrane and gate;</font><font color="#000000">
  walls
  gates
  </font><font color="#0000aa">set</font><font color="#000000"> j </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> g </font><font color="#963700">0</font><font color="#000000">
  pores
  

  
  </font><font color="#5a5a5a">;creates an initial number of PP1 molecules with random positions in the cytoplasm;</font><font color="#000000">
  create-PP1s initial-PP1
  [setup-PP1
    randomize-right ]


  </font><font color="#5a5a5a">;creates an initial number of tatA molecules with random positions in the inner membrane;</font><font color="#000000">
  create-tatAs tatA-number
  [ setup-tatA
    randomize-inmem ]
  
  
  </font><font color="#5a5a5a">;creates an initial number of degradation machineries and microcystin numbers with random positions in the periplasm;  </font><font color="#000000">
  create-degPs degP-number
  [setup-degPs
    randomize-periplasm ]
    
  create-mcs mc-number
  [ setup-mcs
    randomize-left]
  

    
 
    
  </font><font color="#0000aa">reset-ticks</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">







</font><font color="#5a5a5a">;position randomizing procedure for extracellular particles (microcystin);</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> randomize-left
  </font><font color="#0000aa">setxy</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> (</font><font color="#660096">abs</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000">))
  </font><font color="#660096">random-ycor</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000">]
    [ randomize-left ] </font><font color="#5a5a5a">;;try again until we don't land outside the cell's outer wall</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#5a5a5a">;position randomizing procedure for periplasmic proteins;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> randomize-periplasm
  </font><font color="#0000aa">setxy</font><font color="#000000">  </font><font color="#660096">random-xcor</font><font color="#000000">  </font><font color="#660096">random-ycor</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000">]
    [ randomize-periplasm ] </font><font color="#5a5a5a">;;try again until we don't land on or near the edges of the periplasm</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;position randomizing procedure for tatAs in the inner membrane;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> randomize-inmem
  </font><font color="#0000aa">setxy</font><font color="#000000">  </font><font color="#660096">random-xcor</font><font color="#000000">  </font><font color="#660096">random-ycor</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> ([</font><font color="#660096">pxcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">25</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> [</font><font color="#660096">pxcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">15</font><font color="#000000">)
    [ randomize-inmem ] </font><font color="#5a5a5a">;;try again until we don't land within the inner membrane</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;position randomizing procedure for cytoplasmic proteins;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> randomize-right
  </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">abs</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000">
  </font><font color="#660096">random-ycor</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">19.9</font><font color="#000000">]
    [ randomize-right ] </font><font color="#5a5a5a">;;try again until we don't land on or near the edges of the cytoplasm</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">
















</font><font color="#5a5a5a">;this procedure is what is run through (looping) during the operation of the simulation;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> go

    
  </font><font color="#5a5a5a">;in dealing with proteins which return into unseen parts of the cell and microcystin which, after entering the periplasm, leaves the cell we must introduce losses at the boundaries;</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> PP1s [
    loss-PP1                                                               </font><font color="#5a5a5a">;; calls a procedure to deal with PP1 molecules which return into the cell</font><font color="#000000">
  ]
    
  </font><font color="#0000aa">ask</font><font color="#000000"> mcs [
    loss-mc                                                                </font><font color="#5a5a5a">;; calls a procedure to deal with microcystin molecules which exit the cell</font><font color="#000000">
    bind                                                                   </font><font color="#5a5a5a">;; calls a procedure to deal with the binding of microcystin to PP1 and so the formation of complexes</font><font color="#000000">
  ]
  
  
  </font><font color="#5a5a5a">;to deal with the production rate of PP1 and the introduction rate of microcystin, a set number of proteins and molecules are created;</font><font color="#000000">
  </font><font color="#5a5a5a">;these are created on every fifth tick to ensure a steady rate of creation and are controlled by sliders in the interface;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [
    create-PP1s PP1-production
    [
      </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">abs</font><font color="#000000"> </font><font color="#963700">48</font><font color="#000000">
      </font><font color="#660096">random-ycor</font><font color="#000000">
      setup-PP1
    ]
    
    create-mcs mc-production
    [
      </font><font color="#0000aa">setxy</font><font color="#000000"> ( </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">48</font><font color="#000000"> )
      </font><font color="#660096">random-ycor</font><font color="#000000">
      setup-mcs
    ]
  ]
 
 
  degrade                                                                  </font><font color="#5a5a5a">;; a procedure to degrade PP1s and complexes which encounter the degradation machinery  </font><font color="#000000">
  
  
  
  </font><font color="#5a5a5a">;for remaining memebers of particles class, carry out the usual checks for collision and motion before carrying out any required bounces and then progress</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> particles [
    </font><font color="#0000aa">if</font><font color="#000000"> collide? [check-for-collision]
    </font><font color="#0000aa">if</font><font color="#000000"> random-walk? [</font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000">]
    bounce
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> PP1s [</font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]
  ]
  
  </font><font color="#5a5a5a">;for tatA proteins, they must only continue moving through the inner membrane if they have not been captured to aid in the transportation of a PP1 molecule;</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> tatAs [
    </font><font color="#0000aa">if</font><font color="#000000"> transport </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">false</font><font color="#000000"> [
    </font><font color="#0000aa">if</font><font color="#000000"> collide? [check-for-collision]
    </font><font color="#0000aa">if</font><font color="#000000"> random-walk? [</font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000">]
    stick
    bounce
    </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ] 
    
  ]
  
  </font><font color="#5a5a5a">;only free PP1 proteins which are not being transported can continue moving;</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> PP1s [
    </font><font color="#0000aa">if</font><font color="#000000"> transport </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">false</font><font color="#000000"> [</font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]]
  
  </font><font color="#5a5a5a">;if a PP1 molecule which is being transported gains a sufficiently high number of tatA proteins, it is transported across the inner membrane;</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> PP1s [
    </font><font color="#0000aa">if</font><font color="#000000"> bound-tatA </font><font color="#660096">=</font><font color="#000000"> tatA-required [translocation]]
  
  
  
  </font><font color="#5a5a5a">;the simulation continues forward one tick;</font><font color="#000000">
  </font><font color="#0000aa">tick</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


















</font><font color="#5a5a5a">;;;;Procedures to create the walls and gates of chosen width;;;;</font><font color="#000000">

</font><font color="#5a5a5a">;procedure used to create the environment with coloured areas representing the cytoplasm and membrane;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> walls
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">25</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">51</font><font color="#000000">][ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">19.9</font><font color="#000000">]            </font><font color="#5a5a5a">;; colour the cytoplasm (right half) white                      </font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">26</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000">  </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">14</font><font color="#000000"> ][ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">75</font><font color="#000000"> ]          </font><font color="#5a5a5a">;; colour the membrane green      </font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> ( </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">29</font><font color="#000000"> ) ] [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000"> ]                    </font><font color="#5a5a5a">;; colour the region indicating the rest of the cell (right) light grey</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">-19</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">15</font><font color="#000000">] [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000"> ]          </font><font color="#5a5a5a">;; colour the periplasm (left side) light blue</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">30</font><font color="#000000">) </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> ( </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">18</font><font color="#000000"> ) ] [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> ] </font><font color="#5a5a5a">;; colour the outermembrane (left) dark grey  </font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">



</font><font color="#5a5a5a">;Deals with the creation of pores in the outer membrane;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> gates
 
  </font><font color="#5a5a5a">;for an odd number of gates;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> (gate-number </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [                                             
    </font><font color="#0000aa">set</font><font color="#000000"> seperation ( </font><font color="#660096">round</font><font color="#000000"> ( </font><font color="#963700">99</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> ( (gate-number </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ) ) )            </font><font color="#5a5a5a">;; calculate the required separation between consecutive gate centres (odd number of gates)</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> j </font><font color="#660096">!=</font><font color="#000000"> ((gate-number </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) [                                      </font><font color="#5a5a5a">;; run through the pairs of gates (above and below the centre) using j as our counting variable and </font><font color="#000000">
                                                                           </font><font color="#5a5a5a">;;only stop once all gates have been considered</font><font color="#000000">
      
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ (</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> (</font><font color="#963700">14</font><font color="#000000">) </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> ( </font><font color="#963700">26</font><font color="#000000"> )) </font><font color="#660096">and</font><font color="#000000"> 
        (</font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> j </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">or</font><font color="#000000"> 
          </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> j </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) )] [                            </font><font color="#5a5a5a">;; ask patches in the centre of our current gate pair (j)</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">                                                        </font><font color="#5a5a5a">;; colour these patches a light green</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g </font><font color="#963700">0</font><font color="#000000">                                                              </font><font color="#5a5a5a">;; set the gate-size count of the current gate pair (g)  = 0              </font><font color="#000000">
      gate-width                                                           </font><font color="#5a5a5a">;; call the gate-width procedure to colour the width of the gate this same light green colour</font><font color="#000000">
          ]
      
      </font><font color="#0000aa">set</font><font color="#000000"> j (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)                                                        </font><font color="#5a5a5a">;; progress to the next set of gate pairs</font><font color="#000000">
      gates                                                                </font><font color="#5a5a5a">;; re-run gate until all gate pairs have been considered</font><font color="#000000">
    ]
  ]
  
  
  </font><font color="#5a5a5a">;for an even number of gates;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> (gate-number </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [
    </font><font color="#0000aa">set</font><font color="#000000"> seperation ( </font><font color="#660096">round</font><font color="#000000"> ( </font><font color="#963700">99</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> ( gate-number </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ) ) )                  </font><font color="#5a5a5a">;; calculate the required separation between consecutive gate centres (even number of gates)</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> j </font><font color="#660096">!=</font><font color="#000000"> (gate-number </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) [                                            </font><font color="#5a5a5a">;; run through the pairs of gates (above and below the centre) using j as our counting variable and</font><font color="#000000">
                                                                           </font><font color="#5a5a5a">;; only stop once all gates have been considered</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ (</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> (</font><font color="#963700">14</font><font color="#000000">) </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> ( </font><font color="#963700">26</font><font color="#000000"> )) </font><font color="#660096">and</font><font color="#000000"> 
        ( </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> ( </font><font color="#660096">-</font><font color="#000000"> seperation) </font><font color="#660096">+</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">or</font><font color="#000000">       
          </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> seperation </font><font color="#660096">-</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) )] [             </font><font color="#5a5a5a">;; ask patches in the centre of our current gate pair (j)</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">                                                        </font><font color="#5a5a5a">;; colour these patches a light green</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g </font><font color="#963700">0</font><font color="#000000">                                                              </font><font color="#5a5a5a">;; set the gate-size count of the current gate pair (g)  = 0</font><font color="#000000">
      gate-width                                                           </font><font color="#5a5a5a">;; call the gate-width procedure to colour the width of the gate this same light green colour</font><font color="#000000">
          ] 
      
      </font><font color="#0000aa">set</font><font color="#000000"> j (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)                                                        </font><font color="#5a5a5a">;; progress to the next set of gate pairs</font><font color="#000000">
      gates                                                                </font><font color="#5a5a5a">;; re-run gate until all gate pairs have been considered</font><font color="#000000">
    ]
  ]
    
    
</font><font color="#007f69">end</font><font color="#000000">



</font><font color="#5a5a5a">; procedure to alter the sizes of the gates to the specified widths;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> gate-width
  
  </font><font color="#5a5a5a">;for odd gate-sizes;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> ( gate-size </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [                                                  
    </font><font color="#0000aa">if</font><font color="#000000"> g </font><font color="#660096">!=</font><font color="#000000">(( gate-size </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  ) [                                     </font><font color="#5a5a5a">;; running through g up to half the width of the required gate </font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> g [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]                </font><font color="#5a5a5a">;; for this gate, set the colour of the patch at an incrementing co-ordinate (g) above = light green</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"> g [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]              </font><font color="#5a5a5a">;; for this gate, set the colour of the patch at an incrementing co-ordinate (g) below = light green</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g ( g </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> )                                                      </font><font color="#5a5a5a">;; increment g by 1 to make the gate wider if required</font><font color="#000000">
      gate-width                                                           </font><font color="#5a5a5a">;; re-run this script until the current gate (j) is of the correct width</font><font color="#000000">
    ]
  ]
  
  </font><font color="#5a5a5a">;for odd gate-sizes;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> ( gate-size </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [
    </font><font color="#0000aa">if</font><font color="#000000"> g </font><font color="#660096">!=</font><font color="#000000">(( gate-size ) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  ) [                                         </font><font color="#5a5a5a">;; running through g up to half the width of the required gate</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]                </font><font color="#5a5a5a">;; due to a lack of symmetry for an even gate width case, we must push the patches up by 1</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> (g </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]          </font><font color="#5a5a5a">;; for this gate, set the colour of the patch at an incrementing co-ordinate (g) above = light green</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"> g [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]              </font><font color="#5a5a5a">;; for this gate, set the colour of the patch at an incrementing co-ordinate (g) below = light green</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g ( g </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> )                                                      </font><font color="#5a5a5a">;; increment g by 1 to make the gate wider if required</font><font color="#000000">
      gate-width                                                           </font><font color="#5a5a5a">;; re-run this script until the current gate (j) is of the correct width</font><font color="#000000">
      
    ]    
  ]
</font><font color="#007f69">end</font><font color="#000000">





</font><font color="#5a5a5a">;Deals with the creation of pores in the outer membrane;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> pores
 
  </font><font color="#5a5a5a">;for an odd number of pores;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> (pore-number </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [                                             
    </font><font color="#0000aa">set</font><font color="#000000"> seperation ( </font><font color="#660096">round</font><font color="#000000"> ( </font><font color="#963700">99</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> ( (pore-number </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ) ) )            </font><font color="#5a5a5a">;; calculate the required separation between consecutive pore centres (odd number of pores)</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> j </font><font color="#660096">!=</font><font color="#000000"> ((pore-number </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) [                                      </font><font color="#5a5a5a">;; run through the pairs of pores (above and below the centre) using j as our counting variable and </font><font color="#000000">
                                                                           </font><font color="#5a5a5a">;; only stop once all pores have been considered</font><font color="#000000">
      
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ (</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">30</font><font color="#000000">) </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> ( </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">18</font><font color="#000000"> )) </font><font color="#660096">and</font><font color="#000000"> 
        (</font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> j </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">or</font><font color="#000000"> 
          </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> j </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) )] [                            </font><font color="#5a5a5a">;; ask patches in the positions of our current pore pair (j)</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000">                                                         </font><font color="#5a5a5a">;; colour these patches a light grey</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g </font><font color="#963700">0</font><font color="#000000">                                                              </font><font color="#5a5a5a">;; set the pore-size count of the current pore pair (g)  = 0              </font><font color="#000000">
      pore-width                                                           </font><font color="#5a5a5a">;; call the pore-width procedure to colour the width of the gate this same light grey colour</font><font color="#000000">
          ]
      
      </font><font color="#0000aa">set</font><font color="#000000"> j (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)                                                        </font><font color="#5a5a5a">;; progress to the next set of pore pairs</font><font color="#000000">
      pores                                                                </font><font color="#5a5a5a">;; re-run &quot;pores&quot; until all the required pores have been created</font><font color="#000000">
    ]
  ]
  
  
  </font><font color="#5a5a5a">;for an even number of pores;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> (pore-number </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [
    </font><font color="#0000aa">set</font><font color="#000000"> seperation ( </font><font color="#660096">round</font><font color="#000000"> ( </font><font color="#963700">99</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> ( pore-number </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ) ) )                  </font><font color="#5a5a5a">;; calculate the required separation between consecutive pore centres (even number of pores)</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> j </font><font color="#660096">!=</font><font color="#000000"> (pore-number </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) [                                            </font><font color="#5a5a5a">;; run through the pairs of pores (above and below the centre) using j as our counting variable and</font><font color="#000000">
                                                                           </font><font color="#5a5a5a">;; only stop once all gates have been considered</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ ((</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">30</font><font color="#000000">) </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> ( </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">18</font><font color="#000000"> ))) </font><font color="#660096">and</font><font color="#000000"> 
        ( </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> ( </font><font color="#660096">-</font><font color="#000000"> seperation) </font><font color="#660096">+</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">or</font><font color="#000000">       
          </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> seperation </font><font color="#660096">-</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) )] [             </font><font color="#5a5a5a">;; ask patches at the positions of our current pore pair (j)</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000">                                                         </font><font color="#5a5a5a">;; colour these patches a light grey colour</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g </font><font color="#963700">0</font><font color="#000000">                                                              </font><font color="#5a5a5a">;; set the pore-size count of the current pore pair (g)  = 0</font><font color="#000000">
      pore-width                                                           </font><font color="#5a5a5a">;; call the pore-width procedure to colour the width of the gate this same light grey colour</font><font color="#000000">
          ] 
      
      </font><font color="#0000aa">set</font><font color="#000000"> j (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)                                                        </font><font color="#5a5a5a">;; progress to the next set of pore pairs</font><font color="#000000">
      pores                                                                </font><font color="#5a5a5a">;; re-run &quot;pores&quot; until all gate pairs have been considered</font><font color="#000000">
    ]
  ]
    
    
</font><font color="#007f69">end</font><font color="#000000">



</font><font color="#5a5a5a">; procedure to alter the sizes of the pores to the specified widths;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> pore-width
  
  </font><font color="#5a5a5a">;for odd pore-sizes;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> ( pore-size </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [                                                  
    </font><font color="#0000aa">if</font><font color="#000000"> g </font><font color="#660096">!=</font><font color="#000000">(( pore-size </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  ) [                                     </font><font color="#5a5a5a">;; running through g up to half the width of the required pore </font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> g [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000">]                 </font><font color="#5a5a5a">;; for this pore, set the colour of the patch at an incrementing co-ordinate (g) above = light grey</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"> g [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000">]               </font><font color="#5a5a5a">;; for this pore, set the colour of the patch at an incrementing co-ordinate (g) below = light grey</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g ( g </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> )                                                      </font><font color="#5a5a5a">;; increment g by 1 to make the gate wider if required</font><font color="#000000">
      pore-width                                                           </font><font color="#5a5a5a">;; re-run this script until the current gate (j) is of the correct width</font><font color="#000000">
    ]
  ]
  
  </font><font color="#5a5a5a">;for odd pore-sizes;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> ( pore-size </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [
    </font><font color="#0000aa">if</font><font color="#000000"> g </font><font color="#660096">!=</font><font color="#000000">(( pore-size ) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  ) [                                         </font><font color="#5a5a5a">;; running through g up to half the width of the required pore</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000">]                 </font><font color="#5a5a5a">;; due to a lack of symmetry for an even gate width case, we must push the patches up by 1</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> (g </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000">]           </font><font color="#5a5a5a">;; for this pore, set the colour of the patch at an incrementing co-ordinate (g) above = light grey</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"> g [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000">]               </font><font color="#5a5a5a">;; for this gate, set the colour of the patch at an incrementing co-ordinate (g) below = light grey</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g ( g </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> )                                                      </font><font color="#5a5a5a">;; increment g by 1 to make the pore wider if required</font><font color="#000000">
      pore-width                                                           </font><font color="#5a5a5a">;; re-run this script until the current pore (j) is of the correct width</font><font color="#000000">
      
    ]    
  ]
</font><font color="#007f69">end</font><font color="#000000">
    
   













</font><font color="#5a5a5a">;;;;Procedures for protein/particle death and loss;;;;</font><font color="#000000">


</font><font color="#5a5a5a">; procedure to kill PP1 proteins which disappear back into the cell;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> loss-PP1
  </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pxcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000"> [                                       </font><font color="#5a5a5a">;; if the patch ahead is that which goes to the the inner cell (right wall - colour light grey))</font><font color="#000000">
    </font><font color="#0000aa">die</font><font color="#000000">                                                                    </font><font color="#5a5a5a">;; if the PP1 is not linked to a tat gate, it returns to the cell and dissapears (dies)</font><font color="#000000">
    ]
  
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#5a5a5a">; procedure to kill microcystin which disappear back out into the environment;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> loss-mc 
  </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">19.9</font><font color="#000000"> [</font><font color="#0000aa">die</font><font color="#000000">]                                   </font><font color="#5a5a5a">;; if the patch ahead is that of the outer membrane (dark grey) microcystin escape and so die</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#5a5a5a">; procedure to degrade proteins in the periplasm using degradation proteins;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> degrade
  
  </font><font color="#0000aa">ask</font><font color="#000000"> degPs [ </font><font color="#0000aa">let</font><font color="#000000"> prey </font><font color="#660096">one-of</font><font color="#000000"> PP1s-here                                    </font><font color="#5a5a5a">;; ask degradation machinery to target PP1s on their patch</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> prey </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [                                                    </font><font color="#5a5a5a">;; if a PP1 exists on their patch</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> PP1s-here [ 
        
        </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;=</font><font color="#000000"> degprob [                                         </font><font color="#5a5a5a">;; depending upon the degradation probability defined in the interface</font><font color="#000000">
          </font><font color="#0000aa">ask</font><font color="#000000"> prey [</font><font color="#0000aa">die</font><font color="#000000">]                                                   </font><font color="#5a5a5a">;; have the PP1 degrade and die</font><font color="#000000">
        ]
      ]</font><font color="#0000aa">set</font><font color="#000000"> deg-number ( deg-number </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> )]                                  </font><font color="#5a5a5a">;; increase the degraded tally by one</font><font color="#000000">
  ]
  
  
  </font><font color="#0000aa">ask</font><font color="#000000"> degPs [ </font><font color="#0000aa">let</font><font color="#000000"> prey </font><font color="#660096">one-of</font><font color="#000000"> complexes-here                               </font><font color="#5a5a5a">;; similarly ask the degradation machinery to target complexes on their patch</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> prey </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [                                                    </font><font color="#5a5a5a">;; if there is such a complex</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> complexes-here [ 
        </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;=</font><font color="#000000"> degprob [                                         </font><font color="#5a5a5a">;; depending on the degradation probability</font><font color="#000000">
          </font><font color="#0000aa">ask</font><font color="#000000"> prey [</font><font color="#0000aa">die</font><font color="#000000">]                                                   </font><font color="#5a5a5a">;; have the complexes become degraded and so die</font><font color="#000000">
        ]
      ]</font><font color="#0000aa">set</font><font color="#000000"> deg-number ( deg-number </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> )]                                  </font><font color="#5a5a5a">;; increase the degraded tally by one</font><font color="#000000">
  ]
  
  
</font><font color="#007f69">end</font><font color="#000000">















</font><font color="#5a5a5a">;procedure dealing with the binding of microcystin to PP1 in the periplasm</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> bind
  
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> PP1s-here </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [                                                 </font><font color="#5a5a5a">;; ask tatAs to check if there is a single PP1 on their current position</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;=</font><font color="#000000"> bindprob [                                            </font><font color="#5a5a5a">;; continue depending upon the binding probability set in the interface</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> PP1s-here [
        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> complexes                                                </font><font color="#5a5a5a">;; have the PP1 convert into a differenct agent type - a PP1-microcystin complex</font><font color="#000000">
        setup-complex                                                      </font><font color="#5a5a5a">;; set the characteristics of this complex</font><font color="#000000">
        ]
      
      </font><font color="#0000aa">die</font><font color="#000000">]                                                                 </font><font color="#5a5a5a">;; have the original microcystin disappear (die)</font><font color="#000000">
  ]
  
</font><font color="#007f69">end</font><font color="#000000">
    





</font><font color="#5a5a5a">;procedure controling the bouncing of particles from walls assuming perfect reflectivity</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> bounce
  
  </font><font color="#5a5a5a">;for all particle types other than microcystin and tatA, always bounce off the solid parts of the inner and outer membrane</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> mcs </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> tatAs [
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">75</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> [
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">) 
    ]
  ]
  
  </font><font color="#5a5a5a">;specifically for microcystin, a more complex bounce command is needed for bouncing off the outer membrane;</font><font color="#000000">
  </font><font color="#5a5a5a">;this complex bounce command ensures that when the microcystin bounces off a horizontal surface, it is correctly reflected;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> mcs [
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> [
      </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">29</font><font color="#000000">) </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> (</font><font color="#963700">-17</font><font color="#000000">)) [
          </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#963700">180</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)
      ]
      [
        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)
      ]
    ]
    </font><font color="#5a5a5a">;after entry of microcystin into the periplasm, it is no longer allowed to leave;</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> [
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)
    ]
    </font><font color="#5a5a5a">;microcystin cannot penetrate the inner membrane and must bounce here;</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">75</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)]
  ]
  
  
  
  </font><font color="#5a5a5a">;degradation machinery and PP1-microcystin complexes only reside within the periplasm and so should reflect from any surfaces;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> complexes </font><font color="#660096">or</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> degPs [
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)]]
  
  </font><font color="#5a5a5a">;tatA proteins must remain within the inner membrane and so reflect when entering the cytoplasm or periplasm;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> tatAs [
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">19.9</font><font color="#000000">  [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)]
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000">[</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)] ]
  
  </font><font color="#5a5a5a">;microcystin should reflect from gates also, they cannot enter a gate and be transported to the cytoplasm;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> mcs [
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">  [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)]]
  
  
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> PP1s [
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000"> [
      </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&gt;=</font><font color="#000000"> tatBCprob [
        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)]]
        
    </font><font color="#5a5a5a">;if PP1 molecules find themselves at an available gate for transport, they must set their transport true and await tatA proteins;</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> transport </font><font color="#963700">true</font><font color="#000000"> transporter]
    </font><font color="#5a5a5a">;PP1 molecules in the periplasm cannot enter pores and exit the cell;</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)]
    </font><font color="#5a5a5a">;PP1 molecules in the periplasm can not be transported back to the cytoplasm, they will instead by reflected at the gates;</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)]
    ]
    
  </font><font color="#5a5a5a">;no particle other than tatA proteins are allowed to enter an active gate region, they are reflected;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> PP1s </font><font color="#660096">or</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> complexes </font><font color="#660096">or</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> degPs </font><font color="#660096">or</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> mcs [
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">129</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)]]
    
    
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#5a5a5a">;when a PP1 molecule encounters a free gate in the periplasm, the gate is made active and the colour of the gate altered from light green to light pink;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> transporter
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">][
    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">129</font><font color="#000000"> ]
  </font><font color="#0000aa">repeat</font><font color="#000000"> (gate-size </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">12</font><font color="#000000">) [
    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">129</font><font color="#000000">] [
     </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">] [
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">129</font><font color="#000000">]]]
</font><font color="#007f69">end</font><font color="#000000">








</font><font color="#5a5a5a">; a procedure detecting collisions between particles in the environment</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> check-for-collision 
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> </font><font color="#660096">turtles-here</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">                                          </font><font color="#5a5a5a">;; if two turtles occupy the same current space    </font><font color="#000000">
  [
    </font><font color="#0000aa">let</font><font color="#000000"> candidate </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> </font><font color="#660096">turtles-here</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000">                           </font><font color="#5a5a5a">;; choose one as a candidate</font><font color="#000000">
      [</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> [</font><font color="#660096">who</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> last-collision]                 </font><font color="#5a5a5a">;; who was not the last candidate for collision</font><font color="#000000">
    
    </font><font color="#0000aa">if</font><font color="#000000"> (candidate </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000">) </font><font color="#660096">and</font><font color="#000000"> (speed </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> [speed] </font><font color="#660096">of</font><font color="#000000"> candidate </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)   </font><font color="#5a5a5a">;; if there is a candidate who is not stationary</font><font color="#000000">
    [
      collide-with candidate                                               </font><font color="#5a5a5a">;; run the collide-with procedure with the candidate</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> last-collision candidate                                         </font><font color="#5a5a5a">;; having taken part in a collision, set the asking turtle's last collision</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> candidate [ </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#660096">myself</font><font color="#000000"> ]                          </font><font color="#5a5a5a">;; and the candidate turtle's last collision</font><font color="#000000">
    ]
  ]
  
  
</font><font color="#007f69">end</font><font color="#000000">





</font><font color="#5a5a5a">; a procedure controlling the physics of collisions between particles which are colliding</font><font color="#000000">
</font><font color="#5a5a5a">; the equations below take into account the masses, speeds and heading of the colliding particles and carries out momentum conservation calculations</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> collide-with [ other-particle ] 
  </font><font color="#0000aa">let</font><font color="#000000"> mass2 [mass] </font><font color="#660096">of</font><font color="#000000"> other-particle
  </font><font color="#0000aa">let</font><font color="#000000"> speed2 [speed] </font><font color="#660096">of</font><font color="#000000"> other-particle
  </font><font color="#0000aa">let</font><font color="#000000"> heading2 [</font><font color="#660096">heading</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> other-particle
  </font><font color="#0000aa">let</font><font color="#000000"> theta (</font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000">)
  </font><font color="#0000aa">let</font><font color="#000000"> v1t (speed </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">cos</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">))
  </font><font color="#0000aa">let</font><font color="#000000"> v1l (speed </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">sin</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">))
  </font><font color="#0000aa">let</font><font color="#000000"> v2t (speed2 </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">cos</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> heading2))
  </font><font color="#0000aa">let</font><font color="#000000"> v2l (speed2 </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">sin</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> heading2))
  </font><font color="#0000aa">let</font><font color="#000000"> vcm (((mass </font><font color="#660096">*</font><font color="#000000"> v1t) </font><font color="#660096">+</font><font color="#000000"> (mass2 </font><font color="#660096">*</font><font color="#000000"> v2t)) </font><font color="#660096">/</font><font color="#000000"> (mass </font><font color="#660096">+</font><font color="#000000"> mass2) )
  </font><font color="#0000aa">set</font><font color="#000000"> v1t (</font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> vcm </font><font color="#660096">-</font><font color="#000000"> v1t)
  </font><font color="#0000aa">set</font><font color="#000000"> v2t (</font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> vcm </font><font color="#660096">-</font><font color="#000000"> v2t)
  </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#660096">sqrt</font><font color="#000000"> ((v1t </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> (v1l </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">)
  </font><font color="#0000aa">if</font><font color="#000000"> v1l </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> v1t </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
    [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> (</font><font color="#660096">atan</font><font color="#000000"> v1l v1t)) ]
  </font><font color="#0000aa">ask</font><font color="#000000"> other-particle [
    </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#660096">sqrt</font><font color="#000000"> ((v2t </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> (v2l </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
    </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
    </font><font color="#0000aa">if</font><font color="#000000"> v2l </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> v2t </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
      [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> (</font><font color="#660096">atan</font><font color="#000000"> v2l v2t)) ]
  ]
</font><font color="#007f69">end</font><font color="#000000">





</font><font color="#5a5a5a">;the stick procedure indicates that should a tatA encounter a PP1 molecule which awaits transporting and; </font><font color="#000000">
</font><font color="#5a5a5a">;does not have enough tatA molecules, it should stop and &quot;stick to the PP1;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> stick
  </font><font color="#0000aa">let</font><font color="#000000"> candidate </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> PP1s-here
  </font><font color="#0000aa">if</font><font color="#000000"> candidate </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [
    </font><font color="#0000aa">ask</font><font color="#000000"> candidate [
      </font><font color="#0000aa">if</font><font color="#000000"> bound-tatA </font><font color="#660096">&lt;</font><font color="#000000"> tatA-required </font><font color="#660096">and</font><font color="#000000"> transport </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000"> [
        </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;=</font><font color="#000000"> tatAprob [
          </font><font color="#0000aa">ask</font><font color="#000000"> tatAs-here [
            </font><font color="#0000aa">set</font><font color="#000000"> transport </font><font color="#963700">true</font><font color="#000000">]
          </font><font color="#0000aa">set</font><font color="#000000"> bound-tatA (bound-tatA </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)
        ]
      ]
    ]
  ]
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;the translocation procedure causes a PP1 molecule which has enough tatA molecules to move horizontally through the gate;</font><font color="#000000">
</font><font color="#5a5a5a">;upon reaching the periplasm, the tatA molecules used for transport are released for re-use and the PP1 molecule allowed to move freely once more;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> translocation
  </font><font color="#0000aa">if</font><font color="#000000"> transport </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000"> [
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#963700">270</font><font color="#000000"> 
  </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> tatAs </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [transport </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000">] [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#963700">270</font><font color="#000000">
    </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> 
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">15</font><font color="#000000"> [ 
      </font><font color="#0000aa">set</font><font color="#000000"> transport </font><font color="#963700">false</font><font color="#000000">
      </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000">
      ]
    
  ]
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">13</font><font color="#000000"> [ 
    </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
    </font><font color="#0000aa">rt</font><font color="#000000"> (</font><font color="#963700">360</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000">)
    </font><font color="#0000aa">set</font><font color="#000000"> transport </font><font color="#963700">false</font><font color="#000000">
    reset-gate
    ]
    
  ]
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;a gate used to transport a PP1 molecule must be reset and made available to future PP1 molecules;</font><font color="#000000">
</font><font color="#5a5a5a">;the reset-gate script carries out this resetting of the gates;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> reset-gate 
    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">129</font><font color="#000000">] [
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]
    </font><font color="#0000aa">repeat</font><font color="#000000"> (gate-size </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">12</font><font color="#000000">) [
     </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000">  </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">] [
       </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">129</font><font color="#000000">] [
          </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]]]
</font><font color="#007f69">end</font>
</pre>

</body>
</html>
