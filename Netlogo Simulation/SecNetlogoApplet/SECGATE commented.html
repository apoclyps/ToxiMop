<html>
<head>
<title>SECGATE commented</title>
<style type="text/css">
<!--
/*
    This style sheet is borrowed from the NetLogo User Manual.  However, some of the units were
    changed from em to px because Java's StyleSheet support is limited for relative units such as
    em and % (this will supposively improve with newer versions of the VM) - jrn 7/21/05
    BE VERY VERY CAREFUL when you alter this style sheet -- it's possible to put in
    innocent-looking things that work on some VM's but cause Java exceptions on other for example
    we were using "font-size: 125%" but it caused Java exceptions on Java 1.5 on Windows - ST
    8/25/05
*/
:link { color: rgb(110,0,110); }
:visited { color: rgb(110,0,110); }
body {
    margin-left: 5px;
    font-family: arial, sans-serif;
    background: white;
    font-size: 12pt
}
h1 {
    color: white;
    background: rgb(45,0,45);
    font-size: 18pt;
    margin-bottom: 4px;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h2 {
    margin-top: 15px;
    margin-left: 6px;
    margin-bottom: 4px;
    background: rgb(166,172,255);
    font-size: 15pt;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h3 {
    margin-top: 15px;
    margin-left: 13px;
    margin-bottom: 4px;
    background: rgb(175,175,175);
    font-size: 12pt;
    padding: 0.2em;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h4 {
    margin-top: 15px;
    margin-bottom: 5px;
    margin-left: 15px;
    font-size: 12pt;
}
h5 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
h6 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
p {
    margin-left: 15px;
    margin-bottom: 3px;
}
pre {
    margin-left: 13px;
    background: rgb(225,225,225);
    font-family: monospace;
    font-size: 12pt;
    padding-left: 10px;
    padding-right: 3px;
    padding-top: 7px;
    padding-bottom: 7px;
    margin-top:9px;
    margin-bottom:0px;
}
code {
    font-family: monospace;
    font-size: 12pt;
}
blockquote {
    border: solid;
    border-style: solid;
    border-width: thin;
    border-color: black;
    background: rgb(250,250,220);
    padding-top: 0px;
    padding-bottom: 7px;
    margin-top: 7px;
    margin-bottom:1px;
}
ol {
   margin-bottom:1px;
}
ul {
   margin-bottom:1px;
}

-->
</style>
</head>
<body>

<p>This page was automatically generated by NetLogo 5.0.4.</p>

<p>The applet requires Java 5 or higher.
Java must be enabled in your browser settings.
Mac users must have Mac OS X 10.4 or higher.
Windows and Linux users may obtain the latest Java from
<a href="http://www.java.com/">Oracle's Java site</a>.</p>

<p><hr>

<p><font size="-1">In order for this to work, this file, your model file
(SECGATE commented.nlogo), and the files NetLogoLite.jar and NetLogoLite.jar.pack.gz
must all be in the same directory.  (You can copy NetLogoLite.jar and NetLogoLite.jar.pack.gz
from the directory where you installed NetLogo.)</font></p>

<p><font size="-1">On some systems, you can test the applet locally on your computer
before uploading it to a web server.  It doesn't work on all systems,
though, so if it doesn't work from your hard drive, please try
uploading it to a web server.</font></p>

<p><font size="-1">You don't need to include everything in this file in your page.
If you want, you can just take the HTML code beginning with
&lt;applet&gt; and ending with &lt;/applet&gt;, and paste it into any HTML
file you want.  It's even OK to put multiple &lt;applet&gt; tags
on a single page.</font></p>

<p><font size="-1">If the NetLogoLite files and your model are in different
directories, you must modify the archive= and value= lines
in the HTML code to point to their actual locations.
(For example, if you have multiple applets in different
directories on the same web server, you may want to put
a single copy of the NetLogoLite files in one central place and
change the archive= lines of all the HTML files to point
to that one central copy.  This will save disk space for
you and download time for your users.)</font></p>

<p>
<applet code="org.nlogo.lite.Applet"
        archive="NetLogoLite.jar"
        width="1172" height="556">
  <param name="DefaultModel"
         value="SECGATE%20commented.nlogo">
  <param name="java_arguments"
         value="-Djnlp.packEnabled=true">
</applet>
</p>

<p>powered by
<a target="_blank" href="http://ccl.northwestern.edu/netlogo/">NetLogo</a></p>

<p>view/download model file:
<a href="SECGATE%20commented.nlogo">SECGATE commented.nlogo</a></p>
<h2>WHAT IS IT?</h2><p>This model follows on the Simple Kinetics 2 model. In Simple Kinetics 2, we saw how changes to variables such as temperature, volume, and concentration affected the rate at which a chemical reaction reached an equilibrium state. Here we model the same phenomenon based upon a physical separation.</p><p>This model investigates some laboratory methods that chemists use to purify chemicals. Most of these methods are based upon physical properties of molecular separation. The same principles that affect chemical equilibrium affect physical equilibrium as well. By changing the variables of temperature, volume, and concentration, we can affect not only the speed at which a system reaches equilibrium, but also the nature of the distribution ratio. In this model, we watch how these factors affect the physical distribution of red molecules that are considered &ldquo;dissolved&rdquo; in a blue solvent.</p><h2>HOW TO USE IT</h2><p>Setup the model by pressing either the SETUP-RANDOM or the SETUP-SIDE buttons at the top of the Interface tab. SETUP-RANDOM distributes all the molecules randomly around the world. SETUP-SIDE distributes the blue molecules evenly, while placing the red molecules on the right side of the world.</p><p>Press GO to watch the molecules move about the world as they achieve equilibrium. The plot tracks the relative concentrations of each color molecule on each side of the central divider. If the red line dips below 0, there are more red molecules on the left side of the divider than on the right. If it rises above 0, there are more red molecules on the right side of the divider than on the left. The blue line plots the same relationship for blue molecules.</p><p>You can add more red molecules to the right side of the world by pressing ADD RED.</p><p>Similarly, you can shrink or expand the right side of the box with the buttons SHRINK RIGHT and EXPAND RIGHT, respectively.</p><p>Finally, to change the size of the connection window, move the WINDOW slider to your desired size and then press the CHANGE WINDOW button.</p><h2>THINGS TO NOTICE</h2><p>Pay attention to the plot and compare it what you see in the world. Is there an equal number of blue and red molecules on each side of the divider according to the plot and according to what you see in the view?</p><h2>THINGS TO TRY</h2><p>Run the model with several different states for each variable. Do you observe similar equilibrium effects to those seen in Simple Kinetics 2? Are there significant differences?</p><p>Does the temperature affect the system in the same way it affected the chemical reaction in Simple Kinetics 2? Why or why not?</p><p>How does changing the concentration affect the rate at which the molecules achieve equilibrium? Does this make sense?</p><h2>EXTENDING THE MODEL</h2><p>The system we have established here always comes to an approximately identical equilibrium state, no matter how you change the variables. In the lab, this is not useful to chemists, who want to separate one type of molecule from another. Can you extend the model to separate all of the red molecules from the blue molecules?</p><p>Try adding another color of molecule to the system and randomly distributing all the molecules around the world. Can you devise a way to separate the new molecules from the red molecules?</p><p>Add a slider that allows you to alter the temperature of the system. Think about what effect cooling and heating the system would have on the molecules. Be sure to include a command in the procedures window that will execute your proposed effect.</p><h2>RELATED MODELS</h2><p>Simple Kinetics 1, Simple Kinetics 2</p><h2>RELATED MODELS</h2><p>Simple Kinetics 1<br/>Simple Kinetics 2</p><h2>CREDITS AND REFERENCES</h2><p>Thanks to Mike Stieff for his work on this model.</p><h2>HOW TO CITE</h2><p>If you mention this model in a publication, we ask that you include these citations for the model itself and for the NetLogo software:</p>
<ul>
  <li>Stieff, M. and Wilensky, U. (2001). NetLogo Simple Kinetics 3 model. <a href="http://ccl.northwestern.edu/netlogo/models/SimpleKinetics3">http://ccl.northwestern.edu/netlogo/models/SimpleKinetics3</a>. Center for Connected Learning and Computer-Based Modeling, Northwestern Institute on Complex Systems, Northwestern University, Evanston, IL.</li>
  <li>Wilensky, U. (1999). NetLogo. <a href="http://ccl.northwestern.edu/netlogo/">http://ccl.northwestern.edu/netlogo/</a>. Center for Connected Learning and Computer-Based Modeling, Northwestern Institute on Complex Systems, Northwestern University, Evanston, IL.</li>
</ul><h2>COPYRIGHT AND LICENSE</h2><p>Copyright 2001 Uri Wilensky.</p><p><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png"  alt="CC BY-NC-SA 3.0"/></p><p>This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 3.0 License. To view a copy of this license, visit <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">http://creativecommons.org/licenses/by-nc-sa/3.0/</a> or send a letter to Creative Commons, 559 Nathan Abbott Way, Stanford, California 94305, USA.</p><p>Commercial licenses are also available. To inquire about commercial licenses, please contact Uri Wilensky at <a href="mailto:u&#x72;&#105;&#x40;&#x6e;&#111;&#114;t&#x68;&#x77;e&#115;&#x74;&#x65;&#114;&#110;&#46;&#101;&#100;&#x75;">u&#x72;&#105;&#x40;&#x6e;&#111;&#114;t&#x68;&#x77;e&#115;&#x74;&#x65;&#114;&#110;&#46;&#101;&#100;&#x75;</a>.</p><p>This model was created as part of the projects: PARTICIPATORY SIMULATIONS: NETWORK-BASED DESIGN FOR SYSTEMS LEARNING IN CLASSROOMS and/or INTEGRATED SIMULATION AND MODELING ENVIRONMENT. The project gratefully acknowledges the support of the National Science Foundation (REPP &amp; ROLE programs) &ndash; grant numbers REC #9814682 and REC-0126227.</p>

<h1>CODE</h1>
<pre><font color="#5a5a5a">;creation of populations;</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [PP1s PP1]                                                           </font><font color="#5a5a5a">;; red PP1 molecules</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [degPs degP]                                                         </font><font color="#5a5a5a">;; degradation machinery - black squares</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [mcs mc]                                                             </font><font color="#5a5a5a">;; microcystin, purple turtles, assuming so small that kinetic interaction is negligible</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [complexes complex]                                                  </font><font color="#5a5a5a">;; PP1 bounded to microcystin, purple crosses</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [secBs secB]                                                         </font><font color="#5a5a5a">;; secB proteins, green keys, which bind to microcystin allowing them to enter sec gate</font><font color="#000000">



</font><font color="#5a5a5a">;set up of all variables;</font><font color="#000000">
</font><font color="#007f69">globals</font><font color="#000000"> [  
  seperation                                                               </font><font color="#5a5a5a">;; controls distance between gates</font><font color="#000000">
  
  
  </font><font color="#5a5a5a">;variables required for loops;</font><font color="#000000">
  j                                                                        </font><font color="#5a5a5a">;; keeps count of how  many gates being created</font><font color="#000000">
  k                                                                        </font><font color="#5a5a5a">;; counts rows when colouring periplasm</font><font color="#000000">
  l                                                                        </font><font color="#5a5a5a">;; counts columns when colouring periplasm</font><font color="#000000">
  g                                                                        </font><font color="#5a5a5a">;; keeps count of gate width when colouring</font><font color="#000000">
  
  deg-number                                                               </font><font color="#5a5a5a">;; a count of the number of degraded PP1/complexes</font><font color="#000000">
  PP1-transported                                                          </font><font color="#5a5a5a">;; a count of PP1 transported from cytoplasm to periplasm</font><font color="#000000">
]



</font><font color="#5a5a5a">;attributes associated with all turtles;</font><font color="#000000">
</font><font color="#007f69">turtles-own</font><font color="#000000"> 
[
  speed mass energy                                                        </font><font color="#5a5a5a">;; controls the speed, mass &amp; energy of the turtles for kinetics</font><font color="#000000">
  last-collision                                                           </font><font color="#5a5a5a">;; keeps note of when the previous collision has occured</font><font color="#000000">
  linked?                                                                  </font><font color="#5a5a5a">;; note of whether or not a secB protein is bound to the turtle</font><font color="#000000">
]













</font><font color="#5a5a5a">;creates a class called particles for calling-in PP1s, degPs, mcs &amp; complexes;</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> particles
  </font><font color="#0000aa">report</font><font color="#000000"> (</font><font color="#660096">turtle-set</font><font color="#000000"> PP1s degPs mcs complexes)
</font><font color="#007f69">end</font><font color="#000000">



</font><font color="#5a5a5a">;creates a separate class for particles which exist in the periplasm;</font><font color="#000000">
</font><font color="#007f69">to-report</font><font color="#000000"> periparticles
  </font><font color="#0000aa">report</font><font color="#000000"> (</font><font color="#660096">turtle-set</font><font color="#000000"> degPs mcs complexes)
</font><font color="#007f69">end</font><font color="#000000">













</font><font color="#5a5a5a">;setup for the characteristics of PP1 proteins;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup-PP1
  </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">37500</font><font color="#000000">                                                           </font><font color="#5a5a5a">;; the masses used was the approximate mass of PP1 (all masses are in approximations of daltons)</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#963700">nobody</font><font color="#000000">
  
  </font><font color="#5a5a5a">;physical characteristics;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">1.5</font><font color="#000000">
  
  </font><font color="#0000aa">set</font><font color="#000000"> linked? </font><font color="#963700">false</font><font color="#000000">                                                        </font><font color="#5a5a5a">;; linked is a variable used to describe whether a PP1 is bound to a secB protein - All PP1 molecules begin unbound</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;setup for the characteristics of degradation machinery;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup-degPs 
  </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#963700">10</font><font color="#000000">   
  </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">37500</font><font color="#000000">                                                           </font><font color="#5a5a5a">;; the mass of our degrading machinery has been taken as that of PP1 due to a lack of information. This means it will act in a similar manner to PP1</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#963700">nobody</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;setup for the characteristics of microcystin;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup-mcs
  </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#963700">10</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">995</font><font color="#000000">                                                             </font><font color="#5a5a5a">;; the mass of microcystin-LR is approx 995 daltons</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#963700">nobody</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">114</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;setup for the characteristics of complexes (PP1-microcystin bound together);</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup-complex
  </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#963700">10</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">38495</font><font color="#000000">                                                           </font><font color="#5a5a5a">;; the mass of the complex was simply defined as that of microcystin + PP1</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#963700">nobody</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;x&quot;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">126</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;setup for the characteristics for the secB proteins;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup-secB
  </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#963700">10</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">17278</font><font color="#000000">                                                           </font><font color="#5a5a5a">;; secBs have a referenced mass of 17278</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#963700">nobody</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">55</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> linked? </font><font color="#963700">false</font><font color="#000000">                                                        </font><font color="#5a5a5a">;; linked, again, defines whether the secB protein is bound or free to become bound to a PP1 molecule</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">











</font><font color="#5a5a5a">;The setup procedure creates our environment and sets some conditions for the simulation;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup [both-sides?]
  </font><font color="#0000aa">clear-all</font><font color="#000000">
  
  </font><font color="#5a5a5a">;sets the shapes of particles;</font><font color="#000000">
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> PP1s </font><font color="#963700">&quot;circle&quot;</font><font color="#000000">                                          </font><font color="#5a5a5a">;; PP1 is depicted as a red circle </font><font color="#000000">
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> degPs </font><font color="#963700">&quot;square&quot;</font><font color="#000000">                                         </font><font color="#5a5a5a">;; degradation machinery is depicted as a black square</font><font color="#000000">
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> mcs </font><font color="#963700">&quot;turtle&quot;</font><font color="#000000">                                           </font><font color="#5a5a5a">;; microcystin is depicted as a purple turtle</font><font color="#000000">
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> secBs </font><font color="#963700">&quot;key&quot;</font><font color="#000000">                                            </font><font color="#5a5a5a">;; secB proteins are depicted as green keys</font><font color="#000000">
  
  
  
  
  </font><font color="#5a5a5a">;sets up the initial conditions;</font><font color="#000000">
  
  </font><font color="#5a5a5a">;initial loop values;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> k ( </font><font color="#963700">99</font><font color="#000000"> )
  </font><font color="#0000aa">set</font><font color="#000000"> l ( </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">99</font><font color="#000000"> )
  </font><font color="#0000aa">set</font><font color="#000000"> g </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> j </font><font color="#963700">0</font><font color="#000000">
  
  </font><font color="#5a5a5a">;beginning with a clean slate in degradated number, transported number and gate separation;</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> deg-number </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> PP1-transported </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> seperation </font><font color="#963700">0</font><font color="#000000">
 
 
 
 
 
  </font><font color="#5a5a5a">;calls for the creation of the environment with a membrane and gate;</font><font color="#000000">
  walls
  gates
  

  
  </font><font color="#5a5a5a">;creates an initial number of PP1 molecules and secB molecules with random positions in the cytoplasm;</font><font color="#000000">
  create-PP1s initial-PP1
  [setup-PP1
    randomize-right ]
  
  create-secBs initial-secB
  [setup-secB
    randomize-right ]
    
    
    
    
    
  </font><font color="#5a5a5a">;creates an initial number of degradation machineries and microcystin molecules with random positions in the periplasm;  </font><font color="#000000">
  create-degPs degP-number
  [setup-degPs
    randomize-left ]
    
  create-mcs mc-number
  [ setup-mcs
    randomize-left]
    
 
    
  </font><font color="#0000aa">reset-ticks</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">













</font><font color="#5a5a5a">;position randomizing procedure for periplasmic proteins;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> randomize-left
  </font><font color="#0000aa">setxy</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> (</font><font color="#660096">abs</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000">))
  </font><font color="#660096">random-ycor</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000">]
    [ randomize-left ] </font><font color="#5a5a5a">;;try again until we don't land on or near the edges of the periplasm</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#5a5a5a">;position randomizing procedure for cytoplasmic proteins;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> randomize-right
  </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">abs</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000">
  </font><font color="#660096">random-ycor</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">19.9</font><font color="#000000">]
    [ randomize-right ] </font><font color="#5a5a5a">;;try again until we don't land on or near the edges of the cytoplasm</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">
















</font><font color="#5a5a5a">;this procedure is what is run through (looping) during the operation of the simulation;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> go

    
  </font><font color="#5a5a5a">;in dealing with proteins which return into unseen parts of the cell and microcystin which, after entering the periplasm, leaves the cell we must introduce losses at the boundaries;</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> PP1s [
    loss-PP1                                                               </font><font color="#5a5a5a">;; calls a procedure to deal with PP1 molecules which return into the cell</font><font color="#000000">
  ]
    
  </font><font color="#0000aa">ask</font><font color="#000000"> mcs [
    loss-mc                                                                </font><font color="#5a5a5a">;; calls a procedure to deal with microcystin molecules which exit the cell</font><font color="#000000">
    bind                                                                   </font><font color="#5a5a5a">;; calls a procedure to deal with the binding of microcystin to PP1 and so the formation of complexes</font><font color="#000000">
  ]
  
  
  </font><font color="#5a5a5a">;to deal with the production rate of PP1 and the introduction rate of microcystin, a set number of proteins and molecules are created;</font><font color="#000000">
  </font><font color="#5a5a5a">;these are created on every fifth tick to ensure a steady rate of creation and are controlled by sliders in the interface;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [
    create-PP1s PP1-production
    [
      </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">abs</font><font color="#000000"> </font><font color="#963700">48</font><font color="#000000">
      </font><font color="#660096">random-ycor</font><font color="#000000">
      setup-PP1
    ]
    
    create-mcs mc-production
    [
      </font><font color="#0000aa">setxy</font><font color="#000000"> ( </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">48</font><font color="#000000"> )
      </font><font color="#660096">random-ycor</font><font color="#000000">
      setup-mcs
    ]
  ]
 
  
  
  </font><font color="#5a5a5a">;due to the binding nature of secBs, they require separate coding for their independant vs bound motion;</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> secBs [
    stick                                                                  </font><font color="#5a5a5a">;; calls a procedure to deal with the binding of secB proteins to PP1 molecules in the cytoplasm and the revoking of secB independant motion</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> collide? [check-for-collision]                                      </font><font color="#5a5a5a">;; checks and acts if collisions have been activated in the interface (used for all particle types)</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> random-walk? [</font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000">]                                  </font><font color="#5a5a5a">;; checks and acts if random (brownian) motion has been activated for particle motion</font><font color="#000000">
    bounce                                                                 </font><font color="#5a5a5a">;; procedure to allow particles to bounce from walls (if required) and the membrane </font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> linked? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">false</font><font color="#000000"> [</font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]                                              </font><font color="#5a5a5a">;; this statement allows secB proteins to carry out independant motion ONLY if they are unbound (i.e. if they are not linked)</font><font color="#000000">
  ]
  
  
  
  
  </font><font color="#5a5a5a">;for each secB which is used to transport a PP1, we kill these and re-create that same number at random gate positions - this is for ease of coding and;</font><font color="#000000">
  </font><font color="#5a5a5a">;for simulation of the lack of knowledge on how long these proteins would be bound at specific gates;</font><font color="#000000">
  create-secBs (initial-secB </font><font color="#660096">-</font><font color="#000000"> (</font><font color="#660096">count</font><font color="#000000"> secBs)) [
    setup-secB
    </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> (</font><font color="#660096">one-of</font><font color="#000000"> [</font><font color="#660096">random-pxcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">])
  ]
  
  
  
  degrade                                                                  </font><font color="#5a5a5a">;; a procedure to degrade PP1s and complexes which encounter the degradation machinery  </font><font color="#000000">
  
  
  
  </font><font color="#5a5a5a">;for remaining memebers of particles class, carry out the usual checks for collision and motion before carrying out any required bounces and then progress</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> particles [
    </font><font color="#0000aa">if</font><font color="#000000"> collide? [check-for-collision]
    </font><font color="#0000aa">if</font><font color="#000000"> random-walk? [</font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000">]
    bounce
    </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
  ]
  
  
  
  </font><font color="#5a5a5a">;the simulation continues forward one tick;</font><font color="#000000">
  </font><font color="#0000aa">tick</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


















</font><font color="#5a5a5a">;;;;Procedures to create the walls and gates of chosen width;;;;</font><font color="#000000">

</font><font color="#5a5a5a">;procedure used to create the environment with coloured areas representing the cytoplasm and membrane;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> walls
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000">][ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">19.9</font><font color="#000000">]             </font><font color="#5a5a5a">;; colour the cytoplasm (right half) white                      </font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000">)] [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> ]                       </font><font color="#5a5a5a">;; colour the outermembrane (left) dark grey     </font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">] [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">75</font><font color="#000000"> ]                           </font><font color="#5a5a5a">;; colour the membrane (middle) green      </font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000"> ] [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000"> ]                          </font><font color="#5a5a5a">;; colour the region indicating the rest of the cell (right) light grey</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">-50</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">] [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000"> ]           </font><font color="#5a5a5a">;; colour the periplasm (left side) light blue</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;procedure to create a specified number of gates;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> gates
 
  </font><font color="#5a5a5a">;for an odd number of gates;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> (gate-number </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [                                             
    </font><font color="#0000aa">set</font><font color="#000000"> seperation ( </font><font color="#660096">round</font><font color="#000000"> ( </font><font color="#963700">99</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> ( (gate-number </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ) ) )            </font><font color="#5a5a5a">;; calculate the required separation between consecutive gate centres (odd number of gates)</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> j </font><font color="#660096">!=</font><font color="#000000"> ((gate-number </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) [                                      </font><font color="#5a5a5a">;; run through the pairs of gates (above and below the centre) using j as our counting variable and </font><font color="#000000">
                                                                           </font><font color="#5a5a5a">;; only stop once all gates have been considered</font><font color="#000000">
      
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> 
        (</font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> j </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">or</font><font color="#000000"> 
          </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> j </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) )] [                            </font><font color="#5a5a5a">;; ask patches in the centre of our current gate pair (j)</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">                                                        </font><font color="#5a5a5a">;; colour these patches a light green</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g </font><font color="#963700">0</font><font color="#000000">                                                              </font><font color="#5a5a5a">;; set the gate-size count of the current gate pair (j)  = 0              </font><font color="#000000">
      gate-width                                                           </font><font color="#5a5a5a">;; call the gate-width procedure to colour the width of the gate this same light green colour</font><font color="#000000">
          ]
      
      </font><font color="#0000aa">set</font><font color="#000000"> j (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)                                                        </font><font color="#5a5a5a">;; progress to the next set of gate pairs</font><font color="#000000">
     gates                                                                 </font><font color="#5a5a5a">;; re-run gate until all gate pairs have been considered</font><font color="#000000">
    ]
  ]
  
  
  </font><font color="#5a5a5a">;for an even number of gates;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> (gate-number </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [
    </font><font color="#0000aa">set</font><font color="#000000"> seperation ( </font><font color="#660096">round</font><font color="#000000"> ( </font><font color="#963700">99</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> ( gate-number </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ) ) )                  </font><font color="#5a5a5a">;; calculate the required separation between consecutive gate centres (even number of gates)</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> j </font><font color="#660096">!=</font><font color="#000000"> (gate-number </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) [                                            </font><font color="#5a5a5a">;; run through the pairs of gates (above and below the centre) using j as our counting variable and</font><font color="#000000">
                                                                           </font><font color="#5a5a5a">;; only stop once all gates have been considered</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> 
        ( </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> ( </font><font color="#660096">-</font><font color="#000000"> seperation) </font><font color="#660096">+</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">or</font><font color="#000000">       
          </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> seperation </font><font color="#660096">-</font><font color="#000000"> (seperation </font><font color="#660096">*</font><font color="#000000"> (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) )] [             </font><font color="#5a5a5a">;; ask patches in the centre of our current gate pair (j)</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">                                                        </font><font color="#5a5a5a">;; colour these patches a light green</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g </font><font color="#963700">0</font><font color="#000000">                                                              </font><font color="#5a5a5a">;; set the gate-size count of the current gate pair (j)  = 0</font><font color="#000000">
      gate-width                                                           </font><font color="#5a5a5a">;; call the gate-width procedure to colour the width of the gate this same light green colour</font><font color="#000000">
          ] 
      
      </font><font color="#0000aa">set</font><font color="#000000"> j (j </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)                                                        </font><font color="#5a5a5a">;; progress to the next set of gate pairs</font><font color="#000000">
      gates                                                                </font><font color="#5a5a5a">;; re-run gate until all gate pairs have been considered</font><font color="#000000">
    ]
  ]
    
    
</font><font color="#007f69">end</font><font color="#000000">



</font><font color="#5a5a5a">; procedure to alter the sizes of the gates to the specified widths;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> gate-width
  
  </font><font color="#5a5a5a">;for odd gate-sizes;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> ( gate-size </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [                                                  
    </font><font color="#0000aa">if</font><font color="#000000"> g </font><font color="#660096">!=</font><font color="#000000">(( gate-size </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  ) [                                     </font><font color="#5a5a5a">;; running through g up to half the width of the required gate </font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> g [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]                </font><font color="#5a5a5a">;; for this gate, set the colour of the patch at an incrementing co-ordinate (g) above = light green</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"> g [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]              </font><font color="#5a5a5a">;; for this gate, set the colour of the patch at an incrementing co-ordinate (g) below = light green</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g ( g </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> )                                                      </font><font color="#5a5a5a">;; increment g by 1 to make the gate wider if required</font><font color="#000000">
      gate-width                                                           </font><font color="#5a5a5a">;; re-run this script until the current gate (j) is of the correct width</font><font color="#000000">
    ]
  ]
  
  </font><font color="#5a5a5a">;for odd gate-sizes;</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> ( gate-size </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [
    </font><font color="#0000aa">if</font><font color="#000000"> g </font><font color="#660096">!=</font><font color="#000000">(( gate-size ) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  ) [                                         </font><font color="#5a5a5a">;; running through g up to half the width of the required gate</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]                </font><font color="#5a5a5a">;; due to a lack of symmetry for an even gate width case, we must push the patches up by 1</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> (g </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]          </font><font color="#5a5a5a">;; for this gate, set the colour of the patch at an incrementing co-ordinate (g) above = light green</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-at-heading-and-distance</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"> g [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000">]              </font><font color="#5a5a5a">;; for this gate, set the colour of the patch at an incrementing co-ordinate (g) below = light green</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> g ( g </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> )                                                      </font><font color="#5a5a5a">;; increment g by 1 to make the gate wider if required</font><font color="#000000">
      gate-width                                                           </font><font color="#5a5a5a">;; re-run this script until the current gate (j) is of the correct width</font><font color="#000000">
      
    ]    
  ]
</font><font color="#007f69">end</font><font color="#000000">
    
   













</font><font color="#5a5a5a">;;;;Procedures for protein/particle death and loss;;;;</font><font color="#000000">


</font><font color="#5a5a5a">; procedure to kill PP1 proteins which disappear back into the cell;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> loss-PP1
  </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000"> [                                       </font><font color="#5a5a5a">;; if the patch ahead is that which goes to the the inner cell (right wall - colour light grey))</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> linked? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">false</font><font color="#000000"> [</font><font color="#0000aa">die</font><font color="#000000">                                                </font><font color="#5a5a5a">;; if the PP1 is not linked to a secB, it returns to the cell and dissapears (dies)</font><font color="#000000">
    ]
  ]
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#5a5a5a">; procedure to kill microcystin which disappear back out into the environment;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> loss-mc 
  </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> [</font><font color="#0000aa">die</font><font color="#000000">]                                   </font><font color="#5a5a5a">;; if the patch ahead is that of the outer membrane (dark grey) microcystin escape and so die</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#5a5a5a">; procedure to degrade proteins in the periplasm using degradation proteins;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> degrade
  
  </font><font color="#0000aa">ask</font><font color="#000000"> degPs [ </font><font color="#0000aa">let</font><font color="#000000"> prey </font><font color="#660096">one-of</font><font color="#000000"> PP1s-here                                    </font><font color="#5a5a5a">;; ask degradation machinery to target PP1s on their patch</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> prey </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [                                                    </font><font color="#5a5a5a">;; if a PP1 exists on their patch</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> PP1s-here [ 
        
        </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;=</font><font color="#000000"> degprob [                                         </font><font color="#5a5a5a">;; depending upon the degradation probability defined in the interface</font><font color="#000000">
          </font><font color="#0000aa">ask</font><font color="#000000"> prey [</font><font color="#0000aa">die</font><font color="#000000">]                                                   </font><font color="#5a5a5a">;; have the PP1 degrade and die</font><font color="#000000">
        ]
      ]</font><font color="#0000aa">set</font><font color="#000000"> deg-number ( deg-number </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> )]                                  </font><font color="#5a5a5a">;; increase the degraded counter by one</font><font color="#000000">
  ]
  
  
  </font><font color="#0000aa">ask</font><font color="#000000"> degPs [ </font><font color="#0000aa">let</font><font color="#000000"> prey </font><font color="#660096">one-of</font><font color="#000000"> complexes-here                               </font><font color="#5a5a5a">;; similarly ask the degradation machinery to target complexes on their patch</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> prey </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [                                                    </font><font color="#5a5a5a">;; if there is such a complex</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> complexes-here [ 
        </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;=</font><font color="#000000"> degprob [                                         </font><font color="#5a5a5a">;; depending on the degradation probability</font><font color="#000000">
          </font><font color="#0000aa">ask</font><font color="#000000"> prey [</font><font color="#0000aa">die</font><font color="#000000">]                                                   </font><font color="#5a5a5a">;; have the complexes become degraded and so die</font><font color="#000000">
        ]
      ]</font><font color="#0000aa">set</font><font color="#000000"> deg-number ( deg-number </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> )]                                  </font><font color="#5a5a5a">;; increase the degraded counter by one</font><font color="#000000">
  ]
  
  
</font><font color="#007f69">end</font><font color="#000000">















</font><font color="#5a5a5a">;procedure dealing with the binding of microcystin to PP1 in the periplasm</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> bind
  
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> PP1s-here </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [                                                 </font><font color="#5a5a5a">;; ask secBs to check if there is a single PP1 on their current position</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;=</font><font color="#000000"> bindprob [                                            </font><font color="#5a5a5a">;; continue depending upon the binding probability set in the interface</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> PP1s-here [
        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> complexes                                                </font><font color="#5a5a5a">;; have the PP1 convert into a differenct agent type - a PP1-microcystin complex</font><font color="#000000">
        setup-complex                                                      </font><font color="#5a5a5a">;; set the characteristics of this complex</font><font color="#000000">
        ]
      
      </font><font color="#0000aa">die</font><font color="#000000">]                                                                 </font><font color="#5a5a5a">;; have the original microcystin disappear (die)</font><font color="#000000">
  ]
  
</font><font color="#007f69">end</font><font color="#000000">
    





</font><font color="#5a5a5a">;procedure controling the bouncing of particles from walls assuming perfect reflectivity</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> bounce
  
  </font><font color="#5a5a5a">;turtles should always bounce off the solid parts of the inner and outer membrane</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">75</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> [
    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">) 
  ]
  
  
  </font><font color="#5a5a5a">;turtles should always bounce off the gates if they are currently in the periplasm - no return</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000"> [
    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)
  ]
  
  
  </font><font color="#5a5a5a">;turtles of periparticles class only belong in the periplasm and so if they encounter any patches not of the periplasm colour, they should reflect</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> periparticles [
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)]
  ]
  
  
  </font><font color="#5a5a5a">;for secBs specifically, they should reflect from the periplasm (staying in the cytoplasm) and we simulate them also reflecting when approaching the inner cell</font><font color="#000000">
  </font><font color="#5a5a5a">;we can use this approximation as on average, an equal number will migrate to the inner section of the cell as migrate into the outer part</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> secBs [
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000">  [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)]
  ]
  
  
  </font><font color="#5a5a5a">;for PP1s, they should only be considered to continue into the periplasm if they are bound to secB</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> PP1s [
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">19.9</font><font color="#000000"> [
      </font><font color="#0000aa">if</font><font color="#000000"> linked? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">false</font><font color="#000000"> [                                                 </font><font color="#5a5a5a">;; if the PP1 is not bound to a secB protein         </font><font color="#000000">
        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)]                                           </font><font color="#5a5a5a">;; the PP1 must reflect from the gate</font><font color="#000000">
      </font><font color="#0000aa">if</font><font color="#000000"> linked? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000"> [                                                  </font><font color="#5a5a5a">;; however, if the PP1 is bound to a secB it should be allowed to transfer</font><font color="#000000">
        </font><font color="#0000aa">if</font><font color="#000000"> gateprob </font><font color="#660096">&lt;=</font><font color="#000000"> (</font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000">) [                                      </font><font color="#5a5a5a">;; But depending upon the gate transfer probability</font><font color="#000000">
          </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">)                                          </font><font color="#5a5a5a">;; it may still be reflected</font><font color="#000000">
        ]
      ]
    ]
    
    
    
    </font><font color="#0000aa">if</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">87</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">78</font><font color="#000000"> [    </font><font color="#5a5a5a">;; if the PP1 does continue on - i.e. it is allowed by the probability</font><font color="#000000">
      
      </font><font color="#0000aa">set</font><font color="#000000"> linked? </font><font color="#963700">false</font><font color="#000000">                                                    </font><font color="#5a5a5a">;; unlink the PP1 from it's secB</font><font color="#000000">
      unstick                                                              </font><font color="#5a5a5a">;; unstick the two proteins</font><font color="#000000">
                                                                           </font><font color="#5a5a5a">;; the PP1 direction is unchanged so it is transported</font><font color="#000000">
    ]
  ]
</font><font color="#007f69">end</font><font color="#000000">














</font><font color="#5a5a5a">; a procedure detecting collisions between particles in the environment</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> check-for-collision 
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> </font><font color="#660096">turtles-here</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">                                          </font><font color="#5a5a5a">;; if two turtles occupy the same current space    </font><font color="#000000">
  [
    </font><font color="#0000aa">let</font><font color="#000000"> candidate </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> </font><font color="#660096">turtles-here</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000">                           </font><font color="#5a5a5a">;; choose one as a candidate</font><font color="#000000">
      [</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> [</font><font color="#660096">who</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> last-collision]                 </font><font color="#5a5a5a">;; who was not the last candidate for collision</font><font color="#000000">
    
    </font><font color="#0000aa">if</font><font color="#000000"> (candidate </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000">) </font><font color="#660096">and</font><font color="#000000"> (speed </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> [speed] </font><font color="#660096">of</font><font color="#000000"> candidate </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)   </font><font color="#5a5a5a">;; if there is a candidate who is not stationary</font><font color="#000000">
    [
      collide-with candidate                                               </font><font color="#5a5a5a">;; run the collide-with procedure with the candidate</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> last-collision candidate                                         </font><font color="#5a5a5a">;; having taken part in a collision, set the asking turtle's last collision</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> candidate [ </font><font color="#0000aa">set</font><font color="#000000"> last-collision </font><font color="#660096">myself</font><font color="#000000"> ]                          </font><font color="#5a5a5a">;; and the candidate turtle's last collision</font><font color="#000000">
    ]
  ]
  
  
</font><font color="#007f69">end</font><font color="#000000">





</font><font color="#5a5a5a">; a procedure controlling the physics of collisions between particles which are colliding</font><font color="#000000">
</font><font color="#5a5a5a">; the equations below take into account the masses, speeds and heading of the colliding particles and carries out momentum conservation calculations</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> collide-with [ other-particle ] 
  </font><font color="#0000aa">let</font><font color="#000000"> mass2 [mass] </font><font color="#660096">of</font><font color="#000000"> other-particle
  </font><font color="#0000aa">let</font><font color="#000000"> speed2 [speed] </font><font color="#660096">of</font><font color="#000000"> other-particle
  </font><font color="#0000aa">let</font><font color="#000000"> heading2 [</font><font color="#660096">heading</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> other-particle
  </font><font color="#0000aa">let</font><font color="#000000"> theta (</font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000">)
  </font><font color="#0000aa">let</font><font color="#000000"> v1t (speed </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">cos</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">))
  </font><font color="#0000aa">let</font><font color="#000000"> v1l (speed </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">sin</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000">))
  </font><font color="#0000aa">let</font><font color="#000000"> v2t (speed2 </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">cos</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> heading2))
  </font><font color="#0000aa">let</font><font color="#000000"> v2l (speed2 </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">sin</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> heading2))
  </font><font color="#0000aa">let</font><font color="#000000"> vcm (((mass </font><font color="#660096">*</font><font color="#000000"> v1t) </font><font color="#660096">+</font><font color="#000000"> (mass2 </font><font color="#660096">*</font><font color="#000000"> v2t)) </font><font color="#660096">/</font><font color="#000000"> (mass </font><font color="#660096">+</font><font color="#000000"> mass2) )
  </font><font color="#0000aa">set</font><font color="#000000"> v1t (</font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> vcm </font><font color="#660096">-</font><font color="#000000"> v1t)
  </font><font color="#0000aa">set</font><font color="#000000"> v2t (</font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> vcm </font><font color="#660096">-</font><font color="#000000"> v2t)
  </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#660096">sqrt</font><font color="#000000"> ((v1t </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> (v1l </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
  </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">)
  </font><font color="#0000aa">if</font><font color="#000000"> v1l </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> v1t </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
    [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> (</font><font color="#660096">atan</font><font color="#000000"> v1l v1t)) ]
  </font><font color="#0000aa">ask</font><font color="#000000"> other-particle [
    </font><font color="#0000aa">set</font><font color="#000000"> speed </font><font color="#660096">sqrt</font><font color="#000000"> ((v2t </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> (v2l </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
    </font><font color="#0000aa">set</font><font color="#000000"> energy (</font><font color="#963700">0.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> (speed </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))
    </font><font color="#0000aa">if</font><font color="#000000"> v2l </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> v2t </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
      [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (theta </font><font color="#660096">-</font><font color="#000000"> (</font><font color="#660096">atan</font><font color="#000000"> v2l v2t)) ]
  ]
</font><font color="#007f69">end</font><font color="#000000">






</font><font color="#5a5a5a">; a procedure for the attachment of secBs to PP1 molecules in the cytoplasm</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> stick
  </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> PP1s-here </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ) </font><font color="#660096">and</font><font color="#000000"> (linked? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">false</font><font color="#000000">) [                  </font><font color="#5a5a5a">;; ask secBs if there are PP1s in their current positions ensure that the secBs are not linked     </font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;=</font><font color="#000000"> secBprob [                                            </font><font color="#5a5a5a">;; if this is true and probability assigned in the interface agrees, continue</font><font color="#000000">
      </font><font color="#0000aa">let</font><font color="#000000"> candidate </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> PP1s-here                                 </font><font color="#5a5a5a">;; assign the PP1 that is here as a candidate</font><font color="#000000">
      </font><font color="#0000aa">if</font><font color="#000000"> (candidate </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000">)                                             </font><font color="#5a5a5a">;; as long as the candidate exists, continue</font><font color="#000000">
      [
        </font><font color="#0000aa">ask</font><font color="#000000"> candidate [
          </font><font color="#0000aa">if</font><font color="#000000"> linked? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">false</font><font color="#000000"> [                                             </font><font color="#5a5a5a">;; ensure that the candidate is also not linked and if so continue</font><font color="#000000">
            </font><font color="#0000aa">create-link-to</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">[                                         </font><font color="#5a5a5a">;; create a link with the candidate</font><font color="#000000">
              </font><font color="#0000aa">tie</font><font color="#000000">                                                          </font><font color="#5a5a5a">;; create a tie with the candidate</font><font color="#000000">
              </font><font color="#0000aa">hide-link</font><font color="#000000">                                                    </font><font color="#5a5a5a">;; hide the created (visual) link</font><font color="#000000">
            ] </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> secBs-here [</font><font color="#0000aa">set</font><font color="#000000"> linked? </font><font color="#963700">true</font><font color="#000000">]               </font><font color="#5a5a5a">;; set the secBs linked? property to true (now that it has linked)</font><font color="#000000">
            </font><font color="#0000aa">set</font><font color="#000000"> linked? </font><font color="#963700">true</font><font color="#000000">                                               </font><font color="#5a5a5a">;; set the PP1s linked? property to true (again as it is linked)</font><font color="#000000">
          ]
        ]
        
      ]
    ]
  ]
</font><font color="#007f69">end</font><font color="#000000">




</font><font color="#5a5a5a">; a procedure for the unattachment of secBs on transport through the gates</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> unstick
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">out-link-neighbors</font><font color="#000000"> [                                                 </font><font color="#5a5a5a">;; ask the linked neighbour</font><font color="#000000">
    </font><font color="#0000aa">die</font><font color="#000000">                                                                    </font><font color="#5a5a5a">;; die - this also removes the link, leaving the PP1 free to progress</font><font color="#000000">
  ]
  
</font><font color="#007f69">end</font>
</pre>

</body>
</html>
